# ì´ìŠˆê°€ Openë  ë•Œ ì´ìŠˆ ì •ë³´(ì´ìŠˆ ë²ˆí˜¸, ë¼ë²¨)ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë¸Œëžœì¹˜ë¥¼ ìƒì„±
name: create branch based on issue

on:
  issues:
    types:
      - opened
      
jobs:
  create-branch:
    if: |
      contains(github.event.issue.labels.*.name, 'ðŸŒ± ì‹ ê·œ ê¸°ëŠ¥') ||
      contains(github.event.issue.labels.*.name, 'âœ¨ ë¦¬íŒ©í„°ë§') ||
      contains(github.event.issue.labels.*.name, 'ðŸ”§ ë²„ê·¸ ìˆ˜ì •')
    runs-on: ubuntu-latest
    env:
      ISSUE_NUMBER: ${{ github.event.issue.number }}
      GITHUB_TOKEN: ${{ secrets.GIT_TOKEN }}

    #ë¸Œëžœì¹˜ ë„¤ìž„ : ë¸Œëžœì¹˜ ì¢…ë¥˜/be or fe/#ì´ìŠˆë„˜ë²„
    #ex) refactor/be/#334
    
    steps:
      - name: Set up branch Type
        if: contains(github.event.issue.labels.*.name, 'ðŸŒ± ì‹ ê·œ ê¸°ëŠ¥')
        run: echo "BRANCH_TYPE=feat" >> $GITHUB_ENV
      - name: Set up branch Type
        if: contains(github.event.issue.labels.*.name, 'âœ¨ ë¦¬íŒ©í„°ë§')
        run: echo "BRANCH_TYPE=refactor" >> $GITHUB_ENV
      - name : Set Up branch Type
        if: contains(github.event.issue.labels.*.name, 'ðŸ”§ ë²„ê·¸ ìˆ˜ì •')
        run: echo "BRANCH_TYPE=fix" >> $GITHUB_ENV
        
      - name: Set Up Develop Domain
        if: contains(github.event.issue.labels.*.name, 'BE')
        run: echo "DEVELOP_DOMAIN=be" >> $GITHUB_ENV
      - name: Set Up Develop Domain
        if: contains(github.event.issue.labels.*.name, 'fe')
        run: echo "DEVELOP_DOMAIN=fe" >> $GITHUB_ENV
        
      - name: Create Branch
        uses: peterjgrainger/action-create-branch@v2.3.0
        with:
          branch: refs/heads/${{ env.BRANCH_TYPE }}/${{ env.DEVELOP_DOMAIN }}/#${{ env.ISSUE_NUMBER }}